{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "UnturnedCustom.schema.json",
  "title": "Modix Unturned Custom Server Schema",
  "description": "Custom schema for Unturned server configuration, extending BaseSettings and adding Unturned-specific properties.",
  "type": "object",
  "properties": {
    "BaseSettings": {
      "$ref": "BaseSettings.schema.json",
      "description": "Base settings for the Unturned server.",
      "default": {
        "MODIX_SERVER_NAME": "Unturned Server",
        "DOCKER_IMAGE": "modix-steamcmd-game-server:latest",
        "USE_NAMED_VOLUME": true,
        "DOCKER_VOLUME_NAME": "unturned_server_data",
        "DOCKER_VOLUME_PATH": "/home/steam/unturnedserver",
        "BIND_MOUNT_PATH": null,
        "MODIX_GAME_IS_STEAM": true,
        "GAME_STEAM_ID": 1110390,
        "STEAMAPP_BRANCH": "public",
        "STEAMAPP_BRANCH_PASSWORD": null,
        "SERVER_ARGS": "-debuglog=All",
        "protocal_ports": [
          { "desired_container_port": 27015, "protocol": "udp" },
          { "desired_container_port": 27016, "protocol": "udp" },
          { "desired_container_port": 27017, "protocol": "tcp" }
        ]
      },
      "examples": [
        {
          "MODIX_SERVER_NAME": "Unturned Server",
          "DOCKER_IMAGE": "modix-steamcmd-game-server:latest",
          "USE_NAMED_VOLUME": true,
          "DOCKER_VOLUME_NAME": "unturned_server_data",
          "DOCKER_VOLUME_PATH": "/home/steam/unturnedserver",
          "BIND_MOUNT_PATH": null,
          "MODIX_GAME_IS_STEAM": true,
          "GAME_STEAM_ID": 1110390,
          "STEAMAPP_BRANCH": "public",
          "STEAMAPP_BRANCH_PASSWORD": null,
          "SERVER_ARGS": "-debuglog=All",
          "protocal_ports": [
            { "desired_container_port": 27015, "protocol": "udp" },
            { "desired_container_port": 27016, "protocol": "udp" },
            { "desired_container_port": 27017, "protocol": "tcp" }
          ]
        }
      ]
    },
    "ConfigFiles": {
      "type": "array",
      "description": "List of configuration files for Unturned.",
      "items": { "$ref": "ConfigFile.schema.json" },
      "default": [
        {
          "name": "Commands.dat",
          "path": "/home/steam/Unturned/Servers/ModixServer/Server/Commands.dat",
          "configure_values": true,
          "procedural": false,
          "fields": [
            { "name": "Server Name", "key": "server_name", "type": "string", "default": "My Unturned Server", "description": "Name of the server displayed to players" },
            { "name": "Password", "key": "password", "type": "string", "optional": true, "description": "Optional server join password" },
            { "name": "Max Players", "key": "maxplayers", "type": "number", "default": 24, "min": 1, "max": 64 },
            { "name": "Port", "key": "port", "type": "number", "default": 27015, "min": 1024, "max": 65535 },
            { "name": "Map", "key": "map", "type": "string", "default": "PEI", "description": "Map to load (e.g., PEI, Washington, Russia)" },
            { "name": "Perspective", "key": "perspective", "type": "select", "options": ["Both", "First", "Third"], "default": "Both", "description": "Allowed player perspectives" },
            { "name": "Cheats Enabled", "key": "cheats", "type": "boolean", "default": false },
            { "name": "Welcome Message", "key": "welcome", "type": "string", "optional": true, "description": "Message shown to players on join" },
            { "name": "Owner SteamID64", "key": "owner_steamid", "type": "string", "optional": true, "description": "SteamID64 of the server owner" },
            { "name": "RCON Enabled", "key": "rcon_enabled", "type": "boolean", "default": true },
            { "name": "RCON Port", "key": "rcon_port", "type": "number", "default": 27017, "min": 1024, "max": 65535 },
            { "name": "RCON Password", "key": "rcon_password", "type": "string", "optional": true },
            { "name": "Server File ID", "key": "server_file_id", "type": "string", "default": "Commands.dat", "description": "Name of the config file used (e.g., Commands.dat)" }
          ]
        },
        {
          "name": "Config.json",
          "path": "/home/steam/Unturned/Servers/ModixServer/Server/Config.json",
          "configure_values": false,
          "procedural": true,
          "fields": []
        },
        {
          "name": "WorkshopDownloadConfig.json",
          "path": "/home/steam/Unturned/Servers/ModixServer/Server/WorkshopDownloadConfig.json",
          "configure_values": false,
          "procedural": true,
          "fields": []
        }
      ]
    }
  },
  "required": ["BaseSettings", "ConfigFiles"],
  "additionalProperties": false
}
