{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "ProjectZomboidCustom.schema.json",
  "title": "Modix Project Zomboid Custom Server Schema",
  "description": "Custom schema for Project Zomboid server configuration, extending BaseSettings and adding PZ-specific properties.",
  "type": "object",
  "properties": {
    "BaseSettings": {
      "$ref": "BaseSettings.schema.json",
      "description": "Base settings for the Project Zomboid server.",
      "default": {
        "MODIX_SERVER_NAME": "Project Zomboid",
        "MODIX_GAME_IS_STEAM": true,
        "DOCKER_IMAGE": "modix-steamcmd-game-server:latest",
        "GAME_STEAM_ID": 380870,
        "STEAMAPP_BRANCH": "public",
        "STEAMAPP_BRANCH_PASSWORD": null,
        "SERVER_ARGS": "-debuglog=All",
        "USE_NAMED_VOLUME": true,
        "DOCKER_VOLUME_NAME": "pz_test_server_data",
        "DOCKER_VOLUME_PATH": "/home/steam/pzserver",
        "BIND_MOUNT_PATH": null,
        "protocal_ports": [
          { "desired_container_port": 16261, "protocol": "udp" },
          { "desired_container_port": 16262, "protocol": "udp" },
          { "desired_container_port": 27015, "protocol": "tcp" }
        ],
        "environment_variables": {
          "MODIX_TEST": "testtesttest"
        }
      },
      "examples": [
        {
          "MODIX_SERVER_NAME": "Project Zomboid",
          "MODIX_GAME_IS_STEAM": true,
          "DOCKER_IMAGE": "modix-steamcmd-game-server:latest",
          "GAME_STEAM_ID": 380870,
          "STEAMAPP_BRANCH": "public",
          "STEAMAPP_BRANCH_PASSWORD": null,
          "SERVER_ARGS": "-debuglog=All",
          "USE_NAMED_VOLUME": true,
          "DOCKER_VOLUME_NAME": "pz_test_server_data",
          "DOCKER_VOLUME_PATH": "/home/steam/pzserver",
          "BIND_MOUNT_PATH": null,
          "protocal_ports": [
            { "desired_container_port": 16261, "protocol": "udp" },
            { "desired_container_port": 16262, "protocol": "udp" },
            { "desired_container_port": 27015, "protocol": "tcp" }
          ],
          "environment_variables": {
            "MODIX_TEST": "testtesttest"
          }
        }
      ]
    },
    "ConfigFiles": {
      "type": "array",
      "description": "List of configuration files for Project Zomboid.",
      "items": { "$ref": "ConfigFile.schema.json" },
      "default": [
        {
          "name": "servertest.ini",
          "path": "/home/steam/pzserver/servertest.ini",
          "configure_values": true,
          "procedural": false,
          "fields": [
            { "key": "PublicName", "type": "string", "default": "PZ Test 2 server", "description": "The public name of your server as shown in the server browser." },
            { "key": "Public", "type": "boolean", "default": true, "description": "Whether the server is public (listed in the server browser)." },
            { "key": "Port", "type": "number", "default": 16261, "description": "UDP port for server connections." },
            { "key": "ServerWelcomeMessage", "type": "string", "default": "Welcome to Project Zomboid!", "description": "Message shown to players when they join the server." },
            { "key": "MaxPlayers", "type": "number", "default": 10, "minimum": 1, "maximum": 100, "description": "Maximum number of players allowed on the server." },
            { "key": "Password", "type": "string", "default": null, "description": "Password required to join the server (null for no password)." },
            { "key": "AdminPassword", "type": "string", "default": null, "description": "Password for admin access." },
            { "key": "RCONEnabled", "type": "boolean", "default": true, "description": "Enable RCON remote console." },
            { "key": "RCONPort", "type": "number", "default": 27020, "description": "Port for RCON remote console." },
            { "key": "RCONPassword", "type": "string", "default": null, "description": "Password for RCON remote console." },
            { "key": "Mods", "type": "array", "default": [], "description": "List of enabled mods." },
            { "key": "WorkshopItems", "type": "array", "default": [], "description": "List of Steam Workshop item IDs to load." },
            { "key": "Map", "type": "string", "default": "Muldraugh, KY", "description": "Map to load for the server." },
            { "key": "PVP", "type": "boolean", "default": false, "description": "Enable player versus player combat." },
            { "key": "PauseEmpty", "type": "boolean", "default": true, "description": "Pause the server when no players are connected." },
            { "key": "LogLocalChat", "type": "boolean", "default": false, "description": "Log local chat messages." },
            { "key": "VoiceEnable", "type": "boolean", "default": true, "description": "Enable in-game voice chat." },
            { "key": "Preset", "type": "string", "default": "Survivor", "enum": ["Survivor", "Builder", "Apocalypse"], "description": "Difficulty preset for the server." },
            { "key": "SandboxConfig", "type": "string", "default": null, "description": "Path to the sandbox config file." },
            { "key": "SpawnRegions", "type": "string", "default": null, "description": "Path to the spawn regions file." },
            { "key": "SaveWorldEveryMinutes", "type": "number", "default": 15, "minimum": 1, "maximum": 60, "description": "How often to save the world, in minutes." },
            { "key": "ServerPlayerID", "type": "string", "default": null, "description": "Unique server player ID (optional)." },
            { "key": "UPnP", "type": "boolean", "default": false, "description": "Enable UPnP port forwarding." },
            { "key": "SteamPort1", "type": "number", "default": 8766, "description": "First Steam port for server communication." },
            { "key": "SteamPort2", "type": "number", "default": 8767, "description": "Second Steam port for server communication." },
            { "key": "ResetID", "type": "string", "default": null, "description": "ID used for world resets (optional)." },
            { "key": "Description", "type": "string", "default": "", "description": "Description of the server shown in the server browser." },
            { "key": "HoursForLootRespawn", "type": "number", "default": 0, "minimum": 0, "description": "Number of in-game hours before loot respawns (0 = never)." },
            { "key": "MaxItemsForLootRespawn", "type": "number", "default": 4, "minimum": 0, "description": "Maximum items per container for loot respawn." },
            { "key": "ConstructionPreventsLootRespawn", "type": "boolean", "default": true, "description": "If true, player constructions prevent loot respawn in containers." },
            { "key": "HoursForZombiesRespawn", "type": "number", "default": 0, "minimum": 0, "description": "Number of in-game hours before zombies respawn (0 = never)." },
            { "key": "IncreaseZombieRespawnBy", "type": "number", "default": 0, "minimum": 0, "description": "Increase zombie respawn by this amount." },
            { "key": "DisableSafehouseWhenPlayerConnected", "type": "boolean", "default": false, "description": "Disable safehouse when player is connected." },
            { "key": "SafehouseAllowNonResidential", "type": "boolean", "default": false, "description": "Allow non-residential buildings as safehouses." },
            { "key": "SafehouseAllowFire", "type": "boolean", "default": false, "description": "Allow fire in safehouses." },
            { "key": "SafehouseAllowLoot", "type": "boolean", "default": true, "description": "Allow looting in safehouses." },
            { "key": "SafehouseAllowRespawn", "type": "boolean", "default": true, "description": "Allow respawn in safehouses." },
            { "key": "SafehouseDaySurvivedToClaim", "type": "number", "default": 0, "minimum": 0, "description": "Days survived required to claim a safehouse." },
            { "key": "SafehouseRemovalTime", "type": "number", "default": 144, "minimum": 0, "description": "Time in hours before a safehouse is removed after last owner disconnects." },
            { "key": "AllowDestructionBySledgehammer", "type": "boolean", "default": true, "description": "Allow destruction of structures by sledgehammer." },
            { "key": "KickFastPlayers", "type": "boolean", "default": true, "description": "Kick players moving too fast (anti-cheat)." },
            { "key": "ServerPlayerSaveInterval", "type": "number", "default": 10, "minimum": 1, "maximum": 60, "description": "Interval in minutes to save player data." },
            { "key": "PlayerRespawnWithSelf", "type": "boolean", "default": false, "description": "Players respawn with their own items." },
            { "key": "PlayerRespawnWithOther", "type": "boolean", "default": false, "description": "Players respawn with other players' items." },
            { "key": "PlayerRespawnWithRandom", "type": "boolean", "default": false, "description": "Players respawn with random items." },
            { "key": "AllowTradeUI", "type": "boolean", "default": true, "description": "Allow use of the trade UI." },
            { "key": "DisableRadio", "type": "boolean", "default": false, "description": "Disable in-game radios." },
            { "key": "DisableTV", "type": "boolean", "default": false, "description": "Disable in-game TVs." },
            { "key": "DisableTwitchIntegration", "type": "boolean", "default": false, "description": "Disable Twitch integration." },
            { "key": "AllowNonSteamClients", "type": "boolean", "default": false, "description": "Allow non-Steam clients to connect." },
            { "key": "VoiceSampleRate", "type": "number", "default": 24000, "enum": [8000, 12000, 16000, 24000], "description": "Voice chat sample rate." },
            { "key": "VoiceBuffering", "type": "number", "default": 100, "minimum": 20, "maximum": 200, "description": "Voice chat buffering in ms." },
            { "key": "VoiceMinDistance", "type": "number", "default": 1.0, "minimum": 0.1, "maximum": 10.0, "description": "Minimum distance for voice chat (meters)." },
            { "key": "VoiceMaxDistance", "type": "number", "default": 25.0, "minimum": 1.0, "maximum": 100.0, "description": "Maximum distance for voice chat (meters)." },
            { "key": "Voice3D", "type": "boolean", "default": true, "description": "Enable 3D positional voice chat." },
            { "key": "VoiceVolume", "type": "number", "default": 1.0, "minimum": 0.0, "maximum": 1.0, "description": "Default voice chat volume." },
            { "key": "VoiceVADMode", "type": "string", "default": "auto", "enum": ["auto", "push-to-talk", "always-on"], "description": "Voice activity detection mode." },
            { "key": "AllowCoop", "type": "boolean", "default": true, "description": "Allow cooperative play." },
            { "key": "AllowPVP", "type": "boolean", "default": false, "description": "Allow player versus player combat." },
            { "key": "AllowFire", "type": "boolean", "default": true, "description": "Allow fire on the server." },
            { "key": "AllowLootRespawn", "type": "boolean", "default": true, "description": "Allow loot to respawn." },
            { "key": "AllowZombieRespawn", "type": "boolean", "default": true, "description": "Allow zombies to respawn." },
            { "key": "AllowSafehouse", "type": "boolean", "default": true, "description": "Allow safehouses on the server." },
            { "key": "AllowAdminTeleport", "type": "boolean", "default": true, "description": "Allow admins to teleport." },
            { "key": "AllowCheats", "type": "boolean", "default": false, "description": "Allow cheats on the server." },
            { "key": "AllowDebug", "type": "boolean", "default": false, "description": "Allow debug mode on the server." },
            { "key": "AllowMapReset", "type": "boolean", "default": false, "description": "Allow map resets." },
            { "key": "AllowWorldEvents", "type": "boolean", "default": true, "description": "Allow world events to occur." },
            { "key": "AllowVehicleRespawn", "type": "boolean", "default": true, "description": "Allow vehicles to respawn." },
            { "key": "AllowVehicleDestruction", "type": "boolean", "default": true, "description": "Allow vehicles to be destroyed." },
            { "key": "AllowVehicleClaim", "type": "boolean", "default": true, "description": "Allow players to claim vehicles." },
            { "key": "AllowVehicleLock", "type": "boolean", "default": true, "description": "Allow vehicles to be locked." },
            { "key": "AllowVehicleHotwire", "type": "boolean", "default": true, "description": "Allow vehicles to be hotwired." },
            { "key": "AllowVehicleAlarm", "type": "boolean", "default": true, "description": "Allow vehicle alarms." },
            { "key": "AllowVehicleFuel", "type": "boolean", "default": true, "description": "Allow vehicles to use fuel." },
            { "key": "AllowVehicleBattery", "type": "boolean", "default": true, "description": "Allow vehicles to use batteries." },
            { "key": "AllowVehicleTire", "type": "boolean", "default": true, "description": "Allow vehicles to use tires." },
            { "key": "AllowVehicleEngine", "type": "boolean", "default": true, "description": "Allow vehicles to use engines." },
            { "key": "AllowVehicleParts", "type": "boolean", "default": true, "description": "Allow vehicles to use parts." },
            { "key": "AllowVehicleDamage", "type": "boolean", "default": true, "description": "Allow vehicles to take damage." },
            { "key": "AllowVehicleRepair", "type": "boolean", "default": true, "description": "Allow vehicles to be repaired." },
            { "key": "AllowVehicleUpgrade", "type": "boolean", "default": true, "description": "Allow vehicles to be upgraded." },
            { "key": "AllowVehiclePaint", "type": "boolean", "default": true, "description": "Allow vehicles to be painted." },
            { "key": "AllowVehicleWash", "type": "boolean", "default": true, "description": "Allow vehicles to be washed." },
            { "key": "AllowVehicleTow", "type": "boolean", "default": true, "description": "Allow vehicles to be towed." },
            { "key": "AllowVehicleTrailer", "type": "boolean", "default": true, "description": "Allow vehicles to use trailers." },
            { "key": "AllowVehicleBoat", "type": "boolean", "default": false, "description": "Allow vehicles to be boats." },
            { "key": "AllowVehicleHelicopter", "type": "boolean", "default": false, "description": "Allow vehicles to be helicopters." },
            { "key": "AllowVehiclePlane", "type": "boolean", "default": false, "description": "Allow vehicles to be planes." }
          ]
        }
      ]
    }
  },
  "required": ["BaseSettings", "ConfigFiles"],
  "additionalProperties": false
}
