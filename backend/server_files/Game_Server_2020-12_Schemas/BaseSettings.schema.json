{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "BaseSettings.schema.json",
  "title": "Modix Game Server Base Settings Schema",
  "description": "Schema for base settings used in Modix game server configuration.",
  "type": "object",
  "properties": {
    "MODIX_SERVER_NAME": {
      "type": "string",
      "description": "The display name of the server.",
      "default": "Project Zomboid"
    },
    "MODIX_GAME_IS_STEAM": {
      "type": "boolean",
      "description": "Is the game a Steam game?",
      "default": true
    },
    "DOCKER_IMAGE": {
      "type": "string",
      "description": "Docker image to use for the server.",
      "default": "modix-steamcmd-game-server:latest"
    },
    "GAME_STEAM_ID": {
      "type": "integer",
      "description": "Steam App ID for the game.",
      "default": 380870
    },
    "STEAMAPP_BRANCH": {
      "type": "string",
      "description": "Steam branch to use.",
      "default": "public"
    },
    "STEAMAPP_BRANCH_PASSWORD": {
      "type": ["string", "null"],
      "description": "Password for the Steam branch (if required).",
      "default": null
    },
    "SERVER_ARGS": {
      "type": "string",
      "description": "Arguments to pass to the server executable.",
      "default": "-debuglog=All"
    },
    "USE_NAMED_VOLUME": {
      "type": "boolean",
      "description": "Whether to use a named Docker volume.",
      "default": true
    },
    "DOCKER_VOLUME_NAME": {
      "type": "string",
      "description": "Name of the Docker volume.",
      "default": "pz_test_server_data"
    },
    "DOCKER_VOLUME_PATH": {
      "type": "string",
      "description": "Path inside the container for the Docker volume.",
      "default": "/home/steam/pzserver"
    },
    "BIND_MOUNT_PATH": {
      "type": ["string", "null"],
      "description": "Host path to bind mount (if not using named volume).",
      "default": null
    },
    "protocal_ports": {
      "type": "array",
      "description": "List of protocol/port pairs to expose.",
      "items": {
        "type": "object",
        "properties": {
          "desired_container_port": { "type": "integer", "description": "Container port to expose." },
          "protocol": { "type": "string", "enum": ["tcp", "udp"], "description": "Protocol for the port." }
        },
        "required": ["desired_container_port", "protocol"],
        "additionalProperties": false
      },
      "default": [
        { "desired_container_port": 16261, "protocol": "udp" },
        { "desired_container_port": 16262, "protocol": "udp" },
        { "desired_container_port": 27015, "protocol": "tcp" }
      ]
    },
    "environment_variables": {
      "type": "object",
      "description": "Environment variables to set for the server.",
      "additionalProperties": { "type": "string" },
      "default": { "MODIX_TEST": "testtesttest" }
    },
    "ConfigFiles": {
      "type": "array",
      "description": "List of selectable configuration files for this server.",
      "items": { "$ref": "ConfigFile.schema.json" },
      "default": []
    },
    "Modules": {
      "type": "array",
      "description": "List of modules to load for this server.",
      "items": { "$ref": "Module.schema.json" },
      "default": []
    }
  },
  "required": [
    "MODIX_SERVER_NAME",
    "MODIX_GAME_IS_STEAM",
    "DOCKER_IMAGE",
    "GAME_STEAM_ID",
    "STEAMAPP_BRANCH",
    "STEAMAPP_BRANCH_PASSWORD",
    "SERVER_ARGS",
    "USE_NAMED_VOLUME",
    "DOCKER_VOLUME_NAME",
    "DOCKER_VOLUME_PATH",
    "BIND_MOUNT_PATH",
    "protocal_ports",
    "environment_variables"
  ],
  "additionalProperties": false
}
